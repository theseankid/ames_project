---
title: "Come explore Ames, IA with me"
author: Sean Ippolito
date: "8 May 2019"
output: rmarkdown::github_document
---

## What am I doing here?

I want to show you what it's like to do a data science project. Most of the time I see short projects that only talk about one step in the data science pipeline and jump between datasets. I won't do it all at once because any comprehensive project and be as big and as in depth as you want it to be. However, I will stick to one dataset and show the data analysis and modeling pipeline from start to finish with all the associated problems and solutions on the way. In this project I am going to do my best to model housing prices accurately. I want to highlight the analysis and modeling of the data.

In this document I will do exploratory data analysis and get us ready to find good ways to model housing prices.

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

##  Set-up and Importing Data

The data is collected on sales of homes from Ames, IA. It was originally collected by Dean De Cock, but Max Kuhn cleaned it up and released it as an R package `AmesHousing`. The `AmesHousing` package has both the raw and cleaned versions of the data, here we will use the cleaned version as it is immediately ready for data analysis and modeling, *but* our work isn't done, we will still have to select and engineer some features to get where we want to be.

I will import packages for the data, analysis, and exploration. The `AmesHousing` library gives us the data we will use, the rest is for exploratory data analysis.

```{r, results = "hide"}
library(ggplot2)
library(scales)
library(gridExtra)
library(dplyr)
library(GGally)
library(AmesHousing)
```

## Exploring the data

First I want to see what data in general and the housing proces look like.

```{r}
ames <- make_ames()
sapply(ames,class)
dim(ames)
summary(ames$Sale_Price)
```


So everyone says location matters, is it true here?

The variables dealing with location are Longitude, Latitude, Condition, Neighborhood, and arguably Zoning. The file `amesdoc.txt` in the `ames_project` repo contains all the descriptions for each variable. Lets see how Sale_Price varies with each of these.



## What about linear regression?

Linear regression is a great tool, but we have a problem. Location matters but location and the Sale Price of the home don't interact nicely. More precisely, variation in the sale price exhibits hetersketasticity (change in variance of the sale price dependent upon the independant variables) with respect to location. We have already seen this problem graphically but we can test this rigorously.

ggplot() + stat_summary2d(data=ames, aes(x = Longitude, y = Latitude, z = Sale_Price)) +
+     scale_fill_gradient(name = "Sale_Price", low = "green", high = "red") 

map <- get_map(location = "austin", zoom = 12)
data <- setDT(read.csv(file.choose(), stringsAsFactors = FALSE))
data[, average_rate_per_night := as.numeric(gsub(",", "",
    substr(average_rate_per_night, 2, nchar(average_rate_per_night))))]

ggmap(map, extent = "device") +
    stat_summary_2d(data = data, aes(x = longitude, y = latitude, 
        z = average_rate_per_night), fun = mean, alpha = 0.6, bins = 30) +
    scale_fill_gradient(name = "Price", low = "green", high = "red") 

## Training Models




# Evaluation




## Conclusion




## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
